

import React, { useEffect, useState, useCallback, useMemo } from "react";
import { useNavigate } from "react-router-dom";
import { ChevronLeft, ChevronRight, Globe, Shield, Database, Activity, Zap, Lock, Layers, BarChart2, Cpu, Network } from "lucide-react";
import {
  LineChart, Line, AreaChart, Area, BarChart, Bar,
  ComposedChart, PieChart, Pie, Cell,
  ResponsiveContainer
} from "recharts";

// Data generator for the live-moving effect
const generateData = () =>
  Array.from({ length: 15 }, (_, i) => ({
    name: i,
    val: Math.floor(Math.random() * 400) + 200,
    val2: Math.floor(Math.random() * 200) + 150
  }));

export default function PremiumVanguardHero() {
  const navigate = useNavigate();
  const [active, setActive] = useState(0);
  const [data, setData] = useState(generateData());

  // Real-time data movement
  useEffect(() => {
    const jitter = setInterval(() => {
      setData(prev => prev.map(item => ({
        ...item,
        val: Math.max(100, item.val + (Math.random() * 80 - 40)),
        val2: Math.max(50, item.val2 + (Math.random() * 50 - 25))
      })));
    }, 1800);
    return () => clearInterval(jitter);
  }, []);

  const slides = useMemo(() => [
    {
      label: "AI_NODE_ACTIVE",
      title: "Cognitive routing and intelligent data processing",
      subtitle: "Edge-computing nodes processing petabytes of telemetry via decentralized AI orchestrators.",
      color: "#007BFF", // Bright Blue
      features: [
        { icon: <Cpu strokeWidth={1.5} size={20} />, text: "Self-Healing Networks" },
        { icon: <Zap strokeWidth={1.5} size={20} />, text: "Zero Latency" },
        { icon: <Shield strokeWidth={1.5} size={20} />, text: "Quantum Ready" },
        { icon: <Globe strokeWidth={1.5} size={20} />, text: "Global Scope" }
      ],
      badges: [
        { text: "99.9% Efficiency", top: "5%", right: "-5%" },
        { text: "AI Optimized", bottom: "15%", left: "-10%" }
      ],
      chart: (d) => (
        <AreaChart data={d}>
          <defs>
            <linearGradient id="c1" x1="0" y1="0" x2="0" y2="1">
              <stop offset="5%" stopColor="#007BFF" stopOpacity={0.6} />
              <stop offset="95%" stopColor="#FF00AA" stopOpacity={0} />
            </linearGradient>
          </defs>
          <Area type="monotone" dataKey="val" stroke="#007BFF" strokeWidth={2} fill="url(#c1)" />
          <Line type="monotone" dataKey="val2" stroke="#FF00AA" strokeWidth={1.5} dot={false} />
        </AreaChart>
      )
    },
    {
      label: "MARKET_SYNC_04",
      title: "High-frequency analysis for decentralized systems",
      subtitle: "Zero-latency market data synchronization and algorithmic pipeline execution platforms.",
      color: "#00E5FF", // Cyan
      features: [
        { icon: <Activity strokeWidth={1.5} size={20} />, text: "Real-time Sync" },
        { icon: <Layers strokeWidth={1.5} size={20} />, text: "Multi-layer Comm" },
        { icon: <Lock strokeWidth={1.5} size={20} />, text: "Encrypted Ledgers" },
        { icon: <BarChart2 strokeWidth={1.5} size={20} />, text: "Live Analytics" }
      ],
      badges: [
        { text: "0.2ms Latency", top: "10%", left: "-5%" },
        { text: "HFT Ready", bottom: "10%", right: "-5%" }
      ],
      chart: (d) => (
        <BarChart data={d}>
          <Bar dataKey="val" fill="#00E5FF" radius={[4, 4, 0, 0]} />
          <Bar dataKey="val2" fill="rgba(112,0,255,0.4)" radius={[4, 4, 0, 0]} />
        </BarChart>
      )
    },
    {
      label: "NETWORK_HEALTH_99",
      title: "Zero-latency peering across global meshes",
      subtitle: "Unifying 12 availability zones world-wide for immediate, uninterrupted connectivity.",
      color: "#39FF14", // Neon Green
      features: [
        { icon: <Network strokeWidth={1.5} size={20} />, text: "Mesh Topology" },
        { icon: <Globe strokeWidth={1.5} size={20} />, text: "12 Global Zones" },
        { icon: <Zap strokeWidth={1.5} size={20} />, text: "Instant Failover" },
        { icon: <Shield strokeWidth={1.5} size={20} />, text: "Edge Security" }
      ],
      badges: [
        { text: "100 Gbps Peering", top: "40%", right: "-12%" },
        { text: "Zero Drops", bottom: "5%", left: "5%" }
      ],
      chart: (d) => (
        <LineChart data={d}>
          <Line type="stepAfter" dataKey="val" stroke="#39FF14" strokeWidth={3} dot={false} />
          <Line type="stepAfter" dataKey="val2" stroke="rgba(255,255,255,0.3)" strokeWidth={2} dot={false} strokeDasharray="5 5" />
        </LineChart>
      )
    },
    {
      label: "FIREWALL_ARMED",
      title: "Quantum-ready protection for next-gen enterprises",
      subtitle: "Deploying advanced neural firewalls and autonomous threat mitigation to secure critical data assets.",
      color: "#7000FF", // Purple
      features: [
        { icon: <Shield strokeWidth={1.5} size={20} />, text: "Zero Trust" },
        { icon: <Activity strokeWidth={1.5} size={20} />, text: "Auto Mitigation" },
        { icon: <Database strokeWidth={1.5} size={20} />, text: "Cold Storage" },
        { icon: <Lock strokeWidth={1.5} size={20} />, text: "Post-Quantum" }
      ],
      badges: [
        { text: "DDoS Protected", top: "-5%", right: "10%" },
        { text: "SOC2 Certified", bottom: "5%", left: "5%" }
      ],
      chart: (d) => (
        <ComposedChart data={d}>
          <Area type="monotone" dataKey="val" fill="rgba(112, 0, 255, 0.25)" stroke="#7000FF" strokeWidth={3} />
          <Line type="monotone" dataKey="val2" stroke="#fff" strokeWidth={2} dot={{ r: 4, fill: '#7000FF' }} />
        </ComposedChart>
      )
    },
    {
      label: "ENCRYPTION_SAFE",
      title: "256-bit encrypted data vault solutions",
      subtitle: "Immutable, globally distributed storage infrastructures built for regulatory compliance and immense scale.",
      color: "#FAFF00", // Yellow
      features: [
        { icon: <Lock strokeWidth={1.5} size={20} />, text: "256-Bit Standard" },
        { icon: <Database strokeWidth={1.5} size={20} />, text: "Immutable Ledgers" },
        { icon: <Shield strokeWidth={1.5} size={20} />, text: "Compliance Init" },
        { icon: <Layers strokeWidth={1.5} size={20} />, text: "Scale Ready" }
      ],
      badges: [
        { text: "Cold Stored", top: "15%", left: "-5%" },
        { text: "Always Verifiable", bottom: "10%", right: "-8%" }
      ],
      chart: (d) => (
        <PieChart>
          <Pie data={d} dataKey="val" innerRadius="65%" outerRadius="85%" paddingAngle={6}>
            {d.map((_, i) => <Cell key={i} fill={i % 3 === 0 ? "#FAFF00" : "rgba(255,255,255,0.05)"} />)}
          </Pie>
        </PieChart>
      )
    }
  ], []);

  const next = useCallback(() => setActive(p => (p + 1) % slides.length), [slides.length]);
  const prev = () => setActive(p => (p - 1 + slides.length) % slides.length);

  useEffect(() => {
    const timer = setInterval(next, 7000);
    return () => clearInterval(timer);
  }, [next]);

  return (
    <>
      <style>{`
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;700;800&display=swap');

        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }

        .h-root {
          position: relative;
          height: 100vh;
          width: 100%;
          padding-top: 80px; /* Adjust for sticky navbar height, preventing overlap */
          background: #050914; /* Deep cyber blue */
          font-family: 'Plus Jakarta Sans', sans-serif;
          overflow: hidden;
          color: white;
          display: flex;
          align-items: center;
        }

        /* ---------------------------------
           BACKGROUND GLOWS & PARTICLES
           --------------------------------- */
        .h-glow {
          position: absolute;
          border-radius: 50%;
          filter: blur(100px);
          opacity: 0.35;
          z-index: 0;
          animation: breatheGlow 10s infinite alternate;
        }

        .glow-1 { top: 0%; left: 10%; width: 50vw; height: 50vh; background: rgba(0, 123, 255, 0.5); }
        .glow-2 { bottom: 0%; right: 10%; width: 50vw; height: 50vh; background: rgba(255, 0, 170, 0.4); }

        @keyframes breatheGlow {
          from { transform: scale(1); opacity: 0.25; }
          to { transform: scale(1.1); opacity: 0.45; }
        }

        /* ---------------------------------
           CIRCUIT BACKGROUND (SVG)
           --------------------------------- */
        .h-circuit-bg {
          position: absolute;
          inset: 0;
          z-index: 1;
          pointer-events: none;
        }

        .circuit-line {
          fill: none;
          stroke-width: 2;
          opacity: 0.7;
          stroke-dasharray: 1000;
          stroke-dashoffset: 1000;
          animation: drawCircuit 12s infinite linear;
        }

        .circuit-line.magenta { stroke: #FF00AA; filter: drop-shadow(0 0 10px #FF00AA); }
        .circuit-line.cyan { stroke: #00E5FF; filter: drop-shadow(0 0 10px #00E5FF); }

        @keyframes drawCircuit {
          0% { stroke-dashoffset: 1000; }
          50% { stroke-dashoffset: 0; }
          100% { stroke-dashoffset: -1000; }
        }

        /* Particles */
        .particles {
          position: absolute;
          inset: 0;
          z-index: 1;
          background-image: 
            radial-gradient(circle at center, rgba(255,255,255,0.8) 0, rgba(255,255,255,0) 2px),
            radial-gradient(circle at center, rgba(255,255,255,0.6) 0, rgba(255,255,255,0) 1.5px);
          background-size: 100px 100px, 150px 150px;
          background-position: 0 0, 50px 50px;
          opacity: 0.25;
          animation: particleDrift 80s linear infinite;
        }

        @keyframes particleDrift {
          to { background-position: 1000px 1000px, 1050px 1050px; }
        }

        /* ---------------------------------
           SLIDER LAYOUT
           --------------------------------- */
        .h-slider-container {
          position: relative;
          width: 100%;
          height: 100%;
          z-index: 10;
        }

        .h-slide {
          position: absolute;
          inset: 0;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8%;
          padding: 0 10% 60px 10%;
          opacity: 0;
          visibility: hidden;
          transition: opacity 0.8s ease, visibility 0.8s, transform 0.8s cubic-bezier(0.25, 1, 0.5, 1);
          transform: translateY(20px);
        }

        .h-slide.active { 
          opacity: 1; 
          visibility: visible;
          transform: translateY(0);
        }

        /* ---------------------------------
           LEFT COL: VISUALIZATION (GLASS)
           --------------------------------- */
        .h-viz-col {
          flex: 0.9;
          max-width: 500px;
          aspect-ratio: 1;
          position: relative;
        }

        .h-glass-card {
          width: 100%;
          height: 100%;
          background: rgba(255, 255, 255, 0.03);
          border: 1px solid rgba(255, 255, 255, 0.08);
          border-radius: 24px;
          backdrop-filter: blur(16px);
          -webkit-backdrop-filter: blur(16px);
          padding: 40px;
          box-shadow: 0 30px 60px rgba(0,0,0,0.6), inset 0 0 20px rgba(255,255,255,0.03);
          position: relative;
          z-index: 2;
        }

        .h-glass-content {
          width: 100%;
          height: 100%;
          position: relative;
          z-index: 3;
        }

        /* Badge Pills */
        .h-badge {
          position: absolute;
          background: rgba(14, 25, 45, 0.9);
          border: 1px solid rgba(255,255,255,0.15);
          color: white;
          padding: 10px 22px;
          border-radius: 100px;
          font-size: 0.85rem;
          font-weight: 700;
          backdrop-filter: blur(10px);
          z-index: 10;
          box-shadow: 0 10px 25px rgba(0,0,0,0.5);
          animation: floatBadge 4s ease-in-out infinite alternate;
          white-space: nowrap;
        }

        @keyframes floatBadge {
          from { transform: translateY(0); }
          to { transform: translateY(-8px); }
        }

        /* ---------------------------------
           RIGHT COL: CONTENT
           --------------------------------- */
        .h-text-col {
          flex: 1.1;
          max-width: 700px;
        }

        .h-label {
          color: #007BFF;
          font-size: 0.85rem;
          font-weight: 800;
          letter-spacing: 2px;
          text-transform: uppercase;
          margin-bottom: 20px;
          display: block;
          text-shadow: 0 0 15px rgba(0, 123, 255, 0.5);
        }

        .h-text-col h1 {
          font-size: clamp(2rem, 3.5vw, 3rem);
          font-weight: 800;
          line-height: 1.15;
          margin-bottom: 24px;
          color: #fff;
          letter-spacing: -0.5px;
          text-wrap: balance;
        }

        .h-text-col p {
          color: #94A3B8;
          font-size: 1.15rem;
          line-height: 1.6;
          margin-bottom: 40px;
          max-width: 600px;
          text-wrap: balance;
        }

        /* Features Grid */
        .h-features {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 25px 40px;
          margin-bottom: 50px;
        }

        .h-feature {
          display: flex;
          align-items: center;
          gap: 16px;
          font-size: 1rem;
          font-weight: 600;
          color: #E2E8F0;
        }

        .h-feature-icon {
          width: 36px;
          height: 36px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        /* CTA Button */
        .h-btn {
          color: #fff;
          border: none;
          padding: 18px 42px;
          border-radius: 100px;
          font-size: 1.05rem;
          font-weight: 700;
          cursor: pointer;
          transition: all 0.3s ease;
          position: relative;
          overflow: hidden;
          z-index: 1;
        }

        .h-btn::before {
          content: "";
          position: absolute;
          inset: 0;
          background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
          transform: translateX(-100%);
          z-index: -1;
          transition: 0.5s;
        }

        .h-btn:hover {
          transform: translateY(-3px);
          filter: brightness(1.2);
        }

        .h-btn:hover::before {
          transform: translateX(100%);
        }

        /* ---------------------------------
           NAVIGATION (Bottom Left)
           --------------------------------- */
        .h-nav-controls {
          position: absolute;
          bottom: 50px;
          left: 10%;
          display: flex;
          align-items: center;
          gap: 25px;
          z-index: 20;
        }

        .h-dots {
          display: flex;
          gap: 12px;
        }

        .h-dot {
          width: 10px;
          height: 10px;
          border-radius: 50%;
          background: rgba(255,255,255,0.2);
          cursor: pointer;
          transition: 0.4s cubic-bezier(0.25, 1, 0.5, 1);
        }

        .h-dot.active {
          background: #007BFF;
          box-shadow: 0 0 15px #007BFF;
          transform: scale(1.3);
        }

        .h-arrows {
          display: flex;
          gap: 12px;
          margin-left: 20px;
        }

        .h-arrow {
          width: 44px;
          height: 44px;
          border-radius: 50%;
          background: rgba(255,255,255,0.05);
          border: 1px solid rgba(255,255,255,0.1);
          color: white;
          display: flex;
          align-items: center;
          justify-content: center;
          cursor: pointer;
          transition: 0.3s;
          backdrop-filter: blur(5px);
        }

        .h-arrow:hover {
          background: #007BFF;
          border-color: #007BFF;
          transform: scale(1.1);
          box-shadow: 0 5px 15px rgba(0,123,255,0.4);
        }

        /* Bottom right decorative spark */
        .h-spark {
          position: absolute;
          bottom: 40px;
          right: 50px;
          color: rgba(255,255,255,0.4);
          z-index: 10;
          animation: pulseSpark 4s infinite alternate;
        }

        @keyframes pulseSpark {
          to { transform: scale(1.2); opacity: 0.8; }
        }

        /* ---------------------------------
           RESPONSIVE
           --------------------------------- */
        @media (max-width: 1200px) {
          .h-slide { gap: 5%; padding: 0 5%; }
          .h-text-col h1 { font-size: 3.5rem; }
        }

        @media (max-width: 1024px) {
          .h-slide { flex-direction: column-reverse; padding: 100px 5% 60px; gap: 40px; text-align: center; }
          .h-viz-col { max-width: 400px; width: 100%; aspect-ratio: auto; height: 350px; }
          .h-text-col { max-width: 100%; display: flex; flex-direction: column; align-items: center; }
          .h-features { text-align: left; }
          .h-label { margin-bottom: 15px; }
          .h-text-col h1 { font-size: 3rem; margin-bottom: 16px; }
          .h-text-col p { margin: 0 auto 30px; }
          .h-nav-controls { left: 50%; transform: translateX(-50%); bottom: 20px; }
          .h-spark { display: none; }
        }

        @media (max-width: 768px) {
          .h-root { min-height: 100vh; padding-top: 80px; padding-bottom: 20px; align-items: center; justify-content: center; }
          .h-slider-container { display: flex; width: 100%; height: 100%; align-items: center; justify-content: center; position: relative; }
          
          /* Hide all complex elements to simplify mobile view */
          .h-viz-col, .h-features, .h-nav-controls, .h-badge, .h-label, .h-spark { display: none !important; }
          
          /* Simplify slides to just the centered text column */
          .h-slide { position: absolute; opacity: 0; visibility: hidden; transform: none; padding: 0 5%; width: 100%; top: 50%; transform: translateY(-50%); flex-direction: column; align-items: center; justify-content: center; left: 0; }
          .h-slide.active { position: absolute; opacity: 1; visibility: visible; display: flex; transform: translateY(-50%); transition: opacity 0.8s ease; }
          
          .h-text-col { width: 100%; max-width: 100%; display: flex; flex-direction: column; align-items: center; text-align: center; }
          .h-text-col h1 { font-size: 2.5rem; margin-bottom: 20px; text-wrap: balance; }
          .h-text-col p { font-size: 1.1rem; margin-bottom: 30px; max-width: 90%; text-wrap: balance; }
          
          /* Native SVG scaling */
          .h-circuit-bg { opacity: 0.6; }
        }
      `}</style>

      <div className="h-root">

        {/* Ambient Glows */}
        <div className="h-glow glow-1" />
        <div className="h-glow glow-2" />

        {/* Particles */}
        <div className="particles" />

        {/* SVG Circuit Background */}
        <div className="h-circuit-bg">
          <svg width="100%" height="100%" viewBox="0 0 1600 800" preserveAspectRatio="xMidYMid slice" xmlns="http://www.w3.org/2000/svg">
            <g>
              {/* Cyan Traces */}
              <path className="circuit-line cyan" d="M -50 300 L 200 300 L 250 350 L 600 350 L 650 300 L 1500 300" />
              <path className="circuit-line cyan" d="M -50 700 L 150 700 L 200 750 L 400 750 L 450 700 L 800 700" />
              <path className="circuit-line cyan" d="M 1200 -50 L 1200 150 L 1250 200 L 1600 200" />

              {/* Magenta Traces */}
              <path className="circuit-line magenta" d="M -50 450 L 300 450 L 350 500 L 700 500 L 750 450 L 1100 450 L 1150 500 L 1600 500" />
              <path className="circuit-line magenta" d="M 850 1000 L 850 800 L 900 750 L 1600 750" />
              <path className="circuit-line magenta" d="M 900 -50 L 900 100 L 950 150 L 1150 150" />
            </g>
          </svg>
        </div>

        {/* Slider */}
        <div className="h-slider-container">
          {slides.map((slide, i) => (
            <div key={i} className={`h-slide ${i === active ? 'active' : ''}`}>

              {/* Left Col: Visual */}
              <div className="h-viz-col">
                {/* Badges */}
                {slide.badges?.map((badge, bIdx) => (
                  <div
                    key={bIdx}
                    className="h-badge"
                    style={{
                      top: badge.top, bottom: badge.bottom, left: badge.left, right: badge.right,
                      animationDelay: `${bIdx * 1.5}s`
                    }}
                  >
                    {badge.text}
                  </div>
                ))}

                <div className="h-glass-card">
                  <div className="h-glass-content">
                    <ResponsiveContainer width="100%" height="100%">
                      {slide.chart(data)}
                    </ResponsiveContainer>
                  </div>
                </div>
              </div>

              {/* Right Col: Content */}
              <div className="h-text-col">
                <span className="h-label" style={{ color: slide.color }}>{slide.label}</span>
                <h1>{slide.title}</h1>
                <p>{slide.subtitle}</p>

                <div className="h-features">
                  {slide.features.map((feat, fIdx) => (
                    <div key={fIdx} className="h-feature">
                      <div className="h-feature-icon" style={{ color: slide.color, borderColor: `${slide.color}60`, background: `${slide.color}15` }}>
                        {feat.icon}
                      </div>
                      <span>{feat.text}</span>
                    </div>
                  ))}
                </div>

                <button className="h-btn" style={{ background: slide.color, boxShadow: `0 10px 20px ${slide.color}50` }} onClick={() => navigate('/contact')}>
                  Connect With Us
                </button>
              </div>

            </div>
          ))}
        </div>

        {/* Navigation */}
        <div className="h-nav-controls">
          <div className="h-dots">
            {slides.map((_, i) => (
              <div
                key={i}
                className={`h-dot ${i === active ? 'active' : ''}`}
                style={{ background: i === active ? slides[active].color : '', boxShadow: i === active ? `0 0 15px ${slides[active].color}` : '' }}
                onClick={() => setActive(i)}
              />
            ))}
          </div>
          <div className="h-arrows">
            <button className="h-arrow" onClick={prev}><ChevronLeft size={20} /></button>
            <button className="h-arrow" onClick={next}><ChevronRight size={20} /></button>
          </div>
        </div>

        {/* Bottom Spark Decorative */}
        <div className="h-spark">
          <svg width="40" height="40" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 0L14.59 9.41L24 12L14.59 14.59L12 24L9.41 14.59L0 12L9.41 9.41L12 0Z" opacity="0.8" />
          </svg>
        </div>

      </div>
    </>
  );
}





